<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3.2.4 Acceso del usuario o suplicante | UT7. Fortificación de la red interna: redes inalámbricas </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="Juan Carlos Requena" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.8 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-119"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header"  style="background-image: url(logo-jcrequena.png); background-repeat: no-repeat;"><div id="headerContent">UT7. Fortificación de la red interna: redes inalámbricas</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UT7. Fortificación de la red interna: redes inalámbricas</a></li>
   <li><a href="objetivos.html" class="no-ch">Objetivos</a></li>
   <li><a href="1_seguridad_en_redes_inalmbricas.html" class="daddy">1. Seguridad en redes inalámbricas</a>
   <ul class="other-section">
      <li><a href="11_ataques_a_redes_wifi.html" class="no-ch">1.1 Ataques a redes wifi</a></li>
      <li><a href="12_averiguar_contrasea_wifi_con_diccionario_utilizando_fuerza_bruta.html" class="no-ch">1.2 Averiguar contraseña Wifi con diccionario utilizando Fuerza bruta</a></li>
      <li><a href="13_mecanismos_de_proteccin.html" class="no-ch">1.3 Mecanismos de protección</a></li>
   </ul>
   </li>
   <li><a href="2_protocolos_de_seguridad_inalmbrica.html" class="daddy">2. Protocolos de seguridad inalámbrica</a>
   <ul class="other-section">
      <li><a href="21_wep.html" class="no-ch">2.1 WEP</a></li>
      <li><a href="22_wpa.html" class="no-ch">2.2 WPA</a></li>
      <li><a href="23_wpa2.html" class="no-ch">2.3 WPA2</a></li>
      <li><a href="24_wpa3.html" class="no-ch">2.4 WPA3</a></li>
      <li><a href="25_wps.html" class="no-ch">2.5 WPS</a></li>
      <li><a href="26_radius.html" class="no-ch">2.6 Radius</a></li>
      <li><a href="laboratorio_1_configurar_un_dispositivo_tplink.html" class="no-ch">Laboratorio 1. Configurar un dispositivo TP-Link</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="3_servidor_de_autenticacin_radius.html" class="current-page-parent daddy">3. Servidor de autenticación Radius</a>
   <ul>
      <li><a href="31_freeradius.html" class="daddy">3.1 FreeRadius</a>
      <ul class="other-section">
         <li><a href="311_instalacin_servidor_radius.html" class="daddy">3.1.1. Instalación servidor Radius</a>
         <ul class="other-section">
            <li><a href="3111_instalacin_cliente_radius_para_pruebas.html" class="no-ch">3.1.1.1. Instalación Cliente Radius para pruebas</a></li>
         </ul>
         </li>
         <li><a href="312_configuracin_del_punto_de_acceso_o_router_inalmbrico.html" class="no-ch">3.1.2 Configuración del punto de acceso o router inalámbrico</a></li>
         <li><a href="313_acceso_del_usuario_o_suplicante.html" class="no-ch">3.1.3 Acceso del usuario o suplicante</a></li>
      </ul>
      </li>
      <li class="current-page-parent"><a href="32_freeradius__validacin_con_usuarios_ldap.html" class="current-page-parent daddy">3.2. FreeRadius - Validación con usuarios LDAP</a>
      <ul>
         <li><a href="321_instalar_openldap.html" class="no-ch">3.2.1 Instalar openLDAP</a></li>
         <li><a href="322_instalacin_y_configuracin_de_freeradius_como_aaa_server.html" class="no-ch">3.2.2 Instalación y configuración de FreeRADIUS como AAA Server</a></li>
         <li><a href="323_configuracin_del_cliente_radius.html" class="no-ch">3.2.3 Configuración del cliente Radius</a></li>
         <li id="active"><a href="324_acceso_del_usuario_o_suplicante.html" class="active no-ch">3.2.4 Acceso del usuario o suplicante</a></li>
         <li><a href="proyecto_red_wpa2enterprise_con_servidor_radius_y_usuarios_openldap.html" class="no-ch">Proyecto. Red WPA2/Enterprise con servidor Radius y usuarios OpenLDAP</a></li>
      </ul>
      </li>
      <li><a href="33_servidor_radius_en_windows_server_2019_para_conexiones_inalmbricas_8021x.html" class="daddy">3.3. Servidor RADIUS en Windows Server 2019 para conexiones inalámbricas 802.1X</a>
      <ul class="other-section">
         <li><a href="331_crear_un_certificado_de_equipo_autofirmado.html" class="no-ch">3.3.1 Crear un certificado de equipo autofirmado</a></li>
         <li><a href="332_instalar_y_configurar_npsradius_en_windows_server.html" class="no-ch">3.3.2 Instalar y configurar NPS/Radius en Windows Server</a></li>
         <li><a href="333_configurar_el_routerap.html" class="no-ch">3.3.3 Configurar el router-AP</a></li>
         <li><a href="334_acceso_a_la_infraestructura_por_usuario_suplicante.html" class="no-ch">3.3.4 Acceso a la infraestructura por usuario suplicante</a></li>
      </ul>
      </li>
      <li><a href="34_servidor_aaa_en_gns3.html" class="no-ch">3.4 Servidor AAA en gns3</a></li>
   </ul>
   </li>
   <li><a href="4_hotspot.html" class="daddy">4. Hotspot</a>
   <ul class="other-section">
      <li><a href="41_hotspot_con_mikrotik.html" class="no-ch">4.1 HotSpot con MikroTik</a></li>
      <li><a href="prctica_2_hotspot_radius.html" class="no-ch">Práctica 2. Hotspot Radius</a></li>
   </ul>
   </li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="323_configuracin_del_cliente_radius.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="proyecto_red_wpa2enterprise_con_servidor_radius_y_usuarios_openldap.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">3.2.4 Acceso del usuario o suplicante</h1></div>
<div class="iDevice_wrapper textIdevice" id="id158">
<div class="iDevice emphasis0" >
<div id="ta158_158_2" class="block iDevice_content">
<div class="exe-text"><h3><span>1. Recursos necesarios</span></h3>
<ul>
<li><strong>Equipo ubuntu server<span> </span></strong>con el servidor freeradius y openldap instalados y configurados.</li>
<li><strong>Punto de acceso o router wifi<span> </span></strong>configurado como cliente radius. Para este caso de ejemplo, se ha utilizado un Router TP-LINK.</li>
<li><strong>Dispositivo inalámbrico,</strong><span> </span>a saber: móvil, tablet y un equipo portátil con tarjeta wifi.</li>
</ul>
<h3><span>2. Acceso del usuario o suplicante al AP</span></h3>
<p>Una vez se ha configurado el servidor y el cliente radius (punto de acceso), es el momento de conectarse desde un dispositivo móvil o desde un equipo portátil/sobremesa por medio de la interfaz inalámbrica y poder obtener los recursos de la red, para esta caso, la posibilidad de navegar por internet.</p>
<p>En la figura inferior, se describe el esquema utilizado en las pruebas de acceso de los dispositivos.</p>
<p style="text-align: center;"><a href="Conexion-Clientes-router-TP-Link.png"><img src="Conexion-Clientes-router-TP-Link.png" alt="" width="762" height="436" /></a></p>
<p><a href="http://localhost:51236/UT8-Contenidos/resources/Conexion-Clientes-AP.png" onclick="browseURL('http://localhost:51236/UT8-Contenidos/resources/Conexion-Clientes-AP.png',this); return false"></a></p>
<p style="text-align: center;"><em><strong>Figura 1.</strong><span> </span>Esquema de red.</em></p>
<p>La operativa es la siguiente:</p>
<ol>
<li>Buscar la red (SSID).</li>
<li>Acceder mediante un usuario LDAP con permisos de acceso a la red Wifi, para este caso de ejemplo:
<ul>
<li>usuario: user01 y user02 que pertenecen al grupo GGProgramacion con permisos de acceso a la red wifi.</li>
<li>password: eeepuc20.</li>
</ul>
</li>
<li>Navegar por internet.</li>
</ol>
<h4>1. Acceso desde un smartphone</h4>
<div class="exe-fx exe-tabs">
<h2>Selección de la red</h2>
<p style="text-align: justify;">En primer lugar hay que buscar el SSID de la red y seleccionarla, para este caso, es la <strong>TP-LINK_FreeRadius_ldap</strong>. A continuación, se solicitan las credenciales de acceso a la misma. Se introducen las credenciales del usuario <strong>user01</strong> que pertenece a un grupo con permisos de acceso a la red.</p>
<table border="0" style="width: 100%;">
<tbody>
<tr>
<td style="width: 50%; text-align: center;"><img src="selecc-red.PNG" alt="" width="335" height="595" /></td>
<td style="width: 50%; text-align: center;"><img src="credenciales.PNG" alt="" width="350" height="623" /></td>
</tr>
</tbody>
</table>
<h2>Certificado</h2>
<p>Aparece el certificado del servidor y si se acceden a los detalles, se puede ver toda la información del mismo. Dado que el certificado no está cargado en el móvil, aparece como <strong>No fiable</strong>. Para continuar, hay que pulsar '<strong>Confiar</strong>'.</p>
<table border="0" style="width: 100%;">
<tbody>
<tr>
<td style="width: 33.3333%; text-align: center;"><img src="cert-1.PNG" alt="" width="324" height="577" /></td>
<td style="width: 33.3333%; text-align: center;"><img src="cert-2.PNG" alt="" width="331" height="589" /></td>
<td style="width: 33.3333%; text-align: center;"><img src="cert-3.PNG" alt="" width="345" height="613" /></td>
</tr>
</tbody>
</table>
<h2>Acceso a la red</h2>
<p>Una vez se ha validado con éxito el usuario, se accede a los datos obtenidos y a continuación, se prueba la navegación en internet. Se puede observar en la imagen inferior iquierda que se ha obtenido una ip dentro del rango de red y también el gw, máscara y dns que ha proporcionado el router wifi WAN, ya que es el que está configurado con un servidor dhcp para servir las direcciones a los equipos que se unen a la red.</p>
<table border="0" style="height: 20px; width: 100%;">
<tbody>
<tr style="height: 20px;">
<td style="width: 50%; text-align: center; height: 20px;"><img src="datos-obtenidos.PNG" alt="" width="356" height="633" /></td>
<td style="width: 50%; height: 20px; text-align: center;"><img src="navegacion.web.PNG" alt="" width="381" height="678" /></td>
</tr>
</tbody>
</table>
</div>
<h4>2. Acceso desde un equipo portátil</h4>
<div class="exe-fx exe-tabs">
<h2>Encabezado 2</h2>
<p style="text-align: justify;"><span>En primer lugar, se accede al menú Wifi para ver las redes disponibles. Como se observa en la figura inferior izquierda, se tiene disponible la red '<strong>TP-LINK_FreeRadius_ldap'</strong></span><span> que es la que se ha configurado en el <strong>punto 3.2.3</strong>. Una vez se selecciona la red '<strong>TP-LINK_FreeRadius_ldap'</strong></span><span>, aparece una nueva ventana donde hay que introducir la seguridad. En primer lugar se realizará la autenticación con<strong> 'WAP/WAP Enterprise' y 'EAP protegido (PEAP)'</strong> que corresponde a la figura central  y luego con '<strong>autenticación TLS a través de túnel'</strong> (figura inferior derecha). De esa manera, se prueban las diferentes configuraciones que se realizaron en el servidor freeradius. En ambos casos, se selecciona '<strong>No se necesita ningún certificado CA</strong>', ya que se ha impelmentado TTLS donde el certificado en el cliente es opcional. Por último, para ambos casos se introducen las credenciales y se deja la autenticación interna como MSCHAPV2. Para iniciar la autenticación, se pulsa </span><strong>Conectar</strong><span>.</span></p>
<table border="0" style="width: 100%;">
<tbody>
<tr>
<td style="width: 33.3333%; text-align: center;"><img src="scceso-Wifi-Cliente-Mint.png" alt="" width="540" height="282" /></td>
<td style="width: 33.3333%; text-align: center;"><img src="eap-PEAP-Mint.png" alt="" width="519" height="597" /></td>
<td style="width: 33.3333%;"><img src="tls-tunel-PC-cliente-mint.png" alt="" width="520" height="560" /></td>
</tr>
</tbody>
</table>
<h2>Obtención de ip y navegación</h2>
<p style="text-align: justify;">Una vez la autenticación se ha realizado con éxito, se lista la configuración de la red del equipo  (figura inferior izquierda) y se observa que se ha concedido al mismo una dirección ip servida por el router wifi Huawei, por lo que ya se tiene acceso a internet y se puede navegar (figura inferior derecha).</p>
<table border="0" style="width: 100%;">
<tbody>
<tr>
<td style="width: 50%; text-align: center;"><img src="ipa-PC-Cliente-Mint.png" alt="" width="779" height="275" /></td>
<td style="width: 50%; text-align: center;"><img src="navegacion-internet-mint.png" alt="" width="1020" height="664" /></td>
</tr>
</tbody>
</table>
<p></p>
</div>
<p style="text-align: justify;"><span style="background-color: #ffffff; font-size: 1em;">Si se accede al log del servidor freeradius, se pueden observar las conexiones que se han realizado así como otras que se han provocado para no tener éxito. Como se puede observar, las autenticaciones descritas anteriormente, están reflejadas en el  los en la hora 11:12 y 11:16.</span></p>
<p style="text-align: center;"><span style="background-color: #ffffff; font-size: 1em;"><img src="var-log-Final.png" alt="" width="945" height="305" /><br /></span></p>
<p style="text-align: center;"><span style="background-color: #ffffff; font-size: 1em;"><em><strong>Figura 2. </strong>Accounting del servidor freeradius.</em></span><span style="background-color: #ffffff; font-size: 1em;"></span></p></div>
</div>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="323_configuracin_del_cliente_radius.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="proyecto_red_wpa2enterprise_con_servidor_radius_y_usuarios_openldap.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_style_js.js"></script></body></html>