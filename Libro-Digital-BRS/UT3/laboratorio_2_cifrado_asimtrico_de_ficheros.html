<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>Laboratorio 2. Cifrado asimétrico de ficheros | UT3. Sistemas de control de acceso y credenciales </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="Juan Carlos Requena" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-101"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header"  style="background-image: url(logoJCRequena.png); background-repeat: no-repeat;"><div id="headerContent">UT3. Sistemas de control de acceso y credenciales</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">UT3. Sistemas de control de acceso y credenciales</a></li>
   <li><a href="objetivos.html" class="no-ch">Objetivos</a></li>
   <li><a href="recomendaciones_de_estudio__resumen.html" class="no-ch">Recomendaciones de estudio - Resumen</a></li>
   <li><a href="1_mecanismos_de_autenticacin_tipos_de_factores.html" class="daddy">1. Mecanismos de autenticación. Tipos de factores.</a>
   <ul class="other-section">
      <li><a href="11_mltiples_factores_de_autenticacin.html" class="no-ch">1.1 Múltiples factores de autenticación</a></li>
      <li><a href="tarea_1_autenticacin_de_doble_factor_por_ssh_con_google_authenticator.html" class="no-ch">Tarea 1. Autenticación de doble factor por SSH con Google Authenticator</a></li>
      <li><a href="laboratorio_1_autenticacin_multifactor_con_yubico.html" class="no-ch">Laboratorio 1. Autenticación multifactor con Yubico</a></li>
      <li><a href="tarea_2_ubuntu__2fa_para_login_con_yubico_security_key.html" class="no-ch">Tarea 2. Ubuntu - 2FA para login con Yubico Security Key</a></li>
   </ul>
   </li>
   <li><a href="2_tcnicas_de_autenticacin.html" class="no-ch">2. Técnicas de autenticación</a></li>
   <li><a href="3_gestin_de_credenciales.html" class="daddy">3. Gestión de credenciales</a>
   <ul class="other-section">
      <li><a href="31_lastpass.html" class="no-ch">3.1 LastPass</a></li>
      <li><a href="32_keepass.html" class="no-ch">3.2 Keepass</a></li>
      <li><a href="33_otros_gestores_de_contraseas.html" class="no-ch">3.3 Otros gestores de contraseñas</a></li>
      <li><a href="tarea_3_instalacin_configuracin_y_puesta_en_produccin_de_un_gestor_de_credenciales.html" class="no-ch">Tarea 3. Instalación, configuración y puesta en producción de un gestor de credenciales</a></li>
      <li><a href="34_brechas_de_seguridad_y_contraseas_inseguras.html" class="no-ch">3.4 Brechas de seguridad y contraseñas inseguras</a></li>
   </ul>
   </li>
   <li><a href="4_acceso_por_medio_de_firma_electrnica.html" class="daddy">4. Acceso por medio de firma electrónica</a>
   <ul class="other-section">
      <li><a href="41_lectores_de_dnie.html" class="no-ch">4.1 Lectores de DNIe</a></li>
      <li><a href="42_uso_de_nfc_con_el_dnie.html" class="no-ch">4.2 Uso de NFC con el DNIe</a></li>
   </ul>
   </li>
   <li><a href="5_sistemas_de_single_sign_on_sso.html" class="daddy">5. Sistemas de Single Sign On SSO</a>
   <ul class="other-section">
      <li><a href="tarea_4_sistemas_sso.html" class="no-ch">Tarea 4. Sistemas SSO</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="6_criptografa.html" class="current-page-parent daddy">6. Criptografía</a>
   <ul>
      <li class="current-page-parent"><a href="61_aplicacin_de_la_criptografa_en_la_seguridad_de_la_informacin.html" class="current-page-parent daddy">6.1 Aplicación de la Criptografía en la seguridad de la información</a>
      <ul>
         <li><a href="611_principios_bsicos_de_la_criptografa.html" class="no-ch">6.1.1 Principios básicos de la criptografía</a></li>
         <li><a href="612_criptografa_clsica.html" class="no-ch">6.1.2 Criptografía clásica</a></li>
         <li><a href="613_servicios_de_seguridad_de_criptografa.html" class="no-ch">6.1.3 Servicios de seguridad de criptografía</a></li>
         <li class="current-page-parent"><a href="614_criptografa_moderna.html" class="current-page-parent daddy">6.1.4 Criptografía Moderna</a>
         <ul>
            <li><a href="6141_criptografa_de_clave_privada.html" class="daddy">6.1.4.1 Criptografía de clave privada</a>
            <ul class="other-section">
               <li><a href="laboratorio_1_cifrado_simtrico_de_archivos.html" class="no-ch">Laboratorio 1. Cifrado simétrico de archivos</a></li>
               <li><a href="prctica_1_cifrado_simtrico.html" class="no-ch">Práctica 1. Cifrado simétrico</a></li>
            </ul>
            </li>
            <li class="current-page-parent"><a href="6142_criptografa_de_clave_pblica.html" class="current-page-parent daddy">6.1.4.2 Criptografía de clave pública</a>
            <ul>
               <li id="active"><a href="laboratorio_2_cifrado_asimtrico_de_ficheros.html" class="active no-ch">Laboratorio 2. Cifrado asimétrico de ficheros</a></li>
               <li><a href="prctica_2cifrado_asimtrico.html" class="no-ch">Práctica 2.Cifrado Asimétrico</a></li>
            </ul>
            </li>
            <li><a href="6143_ventas_y_desventajas_cifrado_simtrico_y_asimetrico.html" class="no-ch">6.1.4.3 Ventas y desventajas cifrado simétrico y asimetrico</a></li>
            <li><a href="6144_criptografa_hbirida.html" class="no-ch">6.1.4.4 Criptografía híbirida</a></li>
         </ul>
         </li>
         <li><a href="615_esteganografa.html" class="daddy">6.1.5 Esteganografía</a>
         <ul class="other-section">
            <li><a href="tarea_5_openstego.html" class="no-ch">Tarea 5. OpenStego</a></li>
         </ul>
         </li>
         <li><a href="616_funciones_hash.html" class="daddy">6.1.6 Funciones hash</a>
         <ul class="other-section">
            <li><a href="tarea_6_funciones_hash.html" class="no-ch">Tarea 6. Funciones hash</a></li>
            <li><a href="tarea_7_quickhash.html" class="no-ch">Tarea 7. QuickHash</a></li>
            <li><a href="tarea_8_funciones_avanzadas_hash_de_powershell.html" class="no-ch">Tarea 8. Funciones avanzadas hash de powershell</a></li>
            <li><a href="laboratorio_3_funciones_hash_con_kleopatra.html" class="no-ch">Laboratorio 3. Funciones hash con Kleopatra</a></li>
         </ul>
         </li>
         <li><a href="617_uso_de_tcnicas_criptogrficas_en_las_pyme.html" class="no-ch">6.1.7 Uso de técnicas criptográficas en las PYME</a></li>
         <li><a href="618_sistemas_encriptacin_hardware_tpmhsm.html" class="no-ch">6.1.8 Sistemas encriptación hardware (TPM/HSM)</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="7_sistemas_de_control_de_acceso_y_autenticacin.html" class="daddy">7. Sistemas de control de acceso y autenticación</a>
   <ul class="other-section">
      <li><a href="71_creacin_de_claves_ssh.html" class="no-ch">7.1 Creación de claves SSH</a></li>
      <li><a href="72_certificados_digitales_gestin_de_una_pki.html" class="daddy">7.2. Certificados digitales, gestión de una PKI</a>
      <ul class="other-section">
         <li><a href="721_certificados_digitales.html" class="daddy">7.2.1 Certificados digitales</a>
         <ul class="other-section">
            <li><a href="laboratorio_4_certificado_personal.html" class="no-ch">Laboratorio 4. Certificado personal</a></li>
            <li><a href="tarea_9_verificacin_de_certificados_digitales.html" class="no-ch">Tarea 9. Verificación de certificados digitales</a></li>
         </ul>
         </li>
         <li><a href="722_firma_digital.html" class="daddy">7.2.2 Firma digital</a>
         <ul class="other-section">
            <li><a href="prctica_3_verificacin_de_la_autenticidad_e_integridad_de_un_mensaje.html" class="no-ch">Práctica 3: Verificación de la autenticidad e integridad de un mensaje</a></li>
         </ul>
         </li>
         <li><a href="723_infraestructuras_de_clave_pblica_pki.html" class="no-ch">7.2.3 Infraestructuras de clave pública (PKI)</a></li>
         <li><a href="laboratorio_5_infraestructura_de_clave_pblica_propia_con_openssl.html" class="no-ch">Laboratorio 5. Infraestructura de clave pública propia con OpenSSL</a></li>
         <li><a href="caso_prctico_uso_de_certificados_en_servicios_web.html" class="no-ch">Caso Práctico. Uso de certificados en Servicios WEB</a></li>
         <li><a href="reto_implementacin_de_una_sistema_de_certificados_pki_en_la_organizacin_con_easyrsa.html" class="no-ch">Reto. Implementación de una sistema de certificados (PKI) en la organización con Easy-RSA</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="8_gestin_de_accesos_sistemas_nac.html" class="daddy">8. Gestión de accesos. Sistemas NAC</a>
   <ul class="other-section">
      <li><a href="laboratorio_6_packetfence.html" class="no-ch">Laboratorio 6. PacketFence</a></li>
      <li><a href="prctica_4_acceso_a_la_web_a_travs_de_un_nac.html" class="no-ch">Práctica 4. Acceso a la web a través de un NAC</a></li>
   </ul>
   </li>
   <li><a href="9_gestin_de_cuentas_privilegiadas.html" class="daddy">9. Gestión de cuentas privilegiadas</a>
   <ul class="other-section">
      <li><a href="101_pam.html" class="no-ch">10.1 PAM</a></li>
      <li><a href="tarea_10_ejecutar_como.html" class="no-ch">Tarea 10. Ejecutar como</a></li>
   </ul>
   </li>
   <li><a href="10_protocolos_radius_y_tacacs_servicio_kerberos.html" class="daddy">10. Protocolos RADIUS y TACACS, servicio KERBEROS</a>
   <ul class="other-section">
      <li><a href="laboratorio_7_freeradius.html" class="daddy">Laboratorio 7. freeRadius</a>
      <ul class="other-section">
         <li><a href="1_instalacin_servidor_radius.html" class="no-ch">1. Instalación servidor Radius</a></li>
         <li><a href="2_instalacin_cliente_radius.html" class="no-ch">2. Instalación Cliente Radius</a></li>
      </ul>
      </li>
      <li><a href="laboratorio_8_radius_windows_server.html" class="no-ch">Laboratorio 8. Radius Windows Server</a></li>
   </ul>
   </li>
   <li><a href="11_ldap.html" class="daddy">11. LDAP</a>
   <ul class="other-section">
      <li><a href="111_instalacin_y_configuracin_de_ldap.html" class="no-ch">11.1 Instalación y configuración de LDAP.</a></li>
      <li><a href="112_configuracin_de_certificados_ssltsl_en_ldap.html" class="no-ch">11.2 Configuración de certificados SSL/TSL en LDAP.</a></li>
      <li><a href="113_creacin_de_cuentas_ldap.html" class="no-ch">11.3 Creación de cuentas LDAP</a></li>
      <li><a href="114_instalacin_de_sssd_en_el_cliente_ubuntu_desktop.html" class="no-ch">11.4 Instalación de SSSD en el cliente Ubuntu Desktop</a></li>
      <li><a href="proyecto_instalar_servidor_de_autenticacin_openldap_servidor_ubuntu.html" class="no-ch">Proyecto. Instalar servidor de autenticación OpenLdap Servidor Ubuntu</a></li>
   </ul>
   </li>
   <li><a href="12_referencias.html" class="no-ch">12. Referencias</a></li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="6142_criptografa_de_clave_pblica.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="prctica_2cifrado_asimtrico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">Laboratorio 2. Cifrado asimétrico de ficheros</h1></div>
<div class="iDevice_wrapper pblIdevice em_iDevice em_iDevice_activity" id="id137">
<div class="iDevice emphasis1" >
<div class="iDevice_header" style="background-image:url(icon_activity.png)"><span class="iDeviceTitle">&nbsp;</span></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta137_137_2" class="block iDevice_content">
<div class="pbl-task-description"><h3>1. Introducción</h3>
<p>En este laboratorio, se van a realizar cifrados asimétricos utilizando la herramienta <strong>gpg</strong>.</p>
<p style="text-align: center;"><img src="esquema-cifrado-asimetrico.1.png" alt="" width="474" height="284" /></p>
<h3>2. Recursos</h3>
<p>Equipo con sistema operativo basado en Ubuntu con la herramienta gpg.</p>
<p align="justify"><span>Creamos dos usuarios:</span></p>
<ul>
<li align="justify"><span>user1.</span></li>
<li align="justify"><span>user2.</span></li>
</ul>
<p><span>Crear un directorio </span><span>en la raíz del sistema → <b>/shared </b>con permisos (777) para que puedan acceder los dos usuarios a la misma.</span></p>
<h3>3.  Trabajo a realizar</h3>
<p><strong>3.1. Generar las claves</strong></p>
<p>En primer lugar, hay que generar las claves con gpg.</p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>sudo gpg --gen-key</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-01.png" alt="" width="704" height="207" /></p>
<p>Nos solicita la contraseña para proteger la clave privada.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-02.png" alt="" width="494" height="144" /></p>
<p style="text-align: justify;">Para ayudar a generar a contraseña, hay que mover el ratón o realizar alguna otra operación en el sistema.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-03.png" alt="" width="800" height="270" /></p>
<p>Una vez generada la clave, podemos verla con el comando <strong>gpg -k</strong>.</p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg -k</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-04.png" alt="" width="707" height="226" /></p>
<p style="text-align: justify;">Si se accede al directorio <strong>.gnupg</strong>, podemos observar los ficheros generados.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-05.png" alt="" width="785" height="244" /></p>
<p style="text-align: justify;">Ahora se necesita exportar la clave pública para poder facilitarla a los usuarios que deseamos que puedan descifrar los ficheros cifrados con mi clave privada. El comando es el siguiente:</p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$<span style="color: #000000; font-size: 12pt;">gpg --export -a “Juan Carlos Requena” &gt; miclavePUB.key</span></b></span></pre>
<p align="justify" style="text-align: center;"><img src="cifrado-asim-gpg-06.png" alt="" width="764" height="145" /></p>
<p align="justify" style="text-align: justify;">Si visualizamos el fichero creado <strong>miclavePUB.key</strong>, se obtiene lo que habría que enviar a los usuarios para poder descifrar los ficheros cifrados por mí.</p>
<p align="justify" style="text-align: center;"><img src="cifrado-asim-gpg-07.png" alt="" width="516" height="498" /></p>
<p align="justify" style="text-align: justify;">Si se desea realizar una copia de seguridad de nuestra clave privado, el comando es:</p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg --export-secret-key -a “Juan Carlos Requena” &gt; mi_clave_PRIV.key</span></pre>
<p align="justify"><img src="cifrado-asim-gpg-08.png" alt="" width="803" height="56" style="display: block; margin-left: auto; margin-right: auto;" /></p>
<p align="justify" style="text-align: justify;">Al ejecutar el comando, nos solicita la contraseña:</p>
<p align="justify" style="text-align: center;"><img src="cifrado-asim-gpg-09.png" alt="" width="600" height="192" /></p>
<p align="justify" style="text-align: justify;">Si listamos el directorio cifrado que es donde se ha creado la copia, se puede observar que se ha realizado la copia correctamente.</p>
<p align="justify" style="text-align: center;"><img src="cifrado-asim-gpg-10.png" alt="" width="559" height="139" /></p>
<h4 align="justify" style="text-align: justify;">3.2 Importar una clave pública</h4>
<p align="justify" style="text-align: justify;">Si se desea importar la clave pública del usuario1, <strong>clave_usuario1_PUB.key</strong> El comando es el siguiente:</p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg --import clave_usuario1_PUB.key</span></pre>
<p align="justify"><img src="cifrado-asim-gpg-11.png" alt="" width="650" height="98" style="display: block; margin-left: auto; margin-right: auto;" /><br />Con el comando gpg -k, podemos listar las claves que se tienen en el sistema y comprobar que ya se ha importado la clave_usuario1_PUB.key.</p>
<p align="justify" style="text-align: center;"><img src="cifrado-asim-gpg-12.png" alt="" width="681" height="473" /></p>
<p align="justify"><span style="font-size: medium;"><span style="color: #000000;">P</span><span style="color: #000000;">or seguridad gpg no considera de confianza la clave importada (pone desconocida). Si pone <strong>absoluta</strong> es que se ha generado aquí.</span></span></p>
<p align="justify"><span style="font-size: medium;"><span style="color: #000000;">Para que sea de confianza el certificado, vamos a editarlo mediante el siguiente comando, donde hay que poner <strong>sign</strong> en el prompt que aparece (ver imagen inferior).</span></span></p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b><span style="font-size: 12pt;"><span style="color: #000000;">gpg --edit-key “Usuario1”</span></span></span></pre>
<p align="justify" style="text-align: center;"><span style="font-size: medium;"><span style="color: #000000;"><img src="cifrado-asim-gpg-13.png" alt="" width="645" height="383" /></span></span></p>
<p align="justify" style="text-align: justify;">Nos solicita la contraseña:</p>
<p align="justify" style="text-align: center;"><span style="font-size: medium;"><img src="cifrado-asim-gpg-14.png" alt="" width="621" height="190" /></span></p>
<p align="justify" style="text-align: justify;"><span style="font-size: medium;">Para finalizar hay que poner quit en el prompt y poner s para guardar los cambios.</span></p>
<p align="justify" style="text-align: center;"><span style="font-size: medium;"><img src="cifrado-asim-gpg-15.png" alt="" width="216" height="45" /></span></p>
<p align="justify" style="text-align: justify;"><span style="font-size: medium;">A continuación, comprobamos que ya está reconocido (absoluta) con list. </span></p>
<p align="justify" style="text-align: center;"><span style="font-size: medium;"><img src="cifrado-asim-gpg-16.png" alt="" width="428" height="161" /></span></p>
<p align="justify" style="text-align: justify;"><span style="font-size: medium;">Volvemos a listar las claves para comprobar que la clave de Usuario1 ya está reconocido (absoluta).</span></p>
<p align="justify" style="text-align: center;"><span style="font-size: medium;"><img src="cifrado-asim-gpg-17.png" alt="" width="690" height="201" /></span></p>
<h4 align="justify" style="text-align: justify;">3.3 Importar una clave privada</h4>
<p>Para importar una clave privada, usamos el siguiente comando:<span style="font-size: medium;"><span style="color: #000000;"></span></span></p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg --allow-secret-key “NombreUsuario”</span></pre>
<h4 align="justify" style="text-align: justify;">3.4 Borrar una clave de un usuario importado</h4>
<p>Para borrar la clave de un usuario importado, usamos el siguiente comando:<span style="font-size: medium;"><span style="color: #000000;"></span></span></p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg --delete-key “NombreUsuario”</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-18.png" alt="" width="669" height="305" /></p>
<p>Para borrar una clave privada de un usuario importado, usamos el siguiente comando:<span style="font-size: medium;"><span style="color: #000000;"></span></span></p>
<pre><span style="font-size: 12pt;"><b>profesor@ubuntu-server2004:~$</b>gpg --delete-secret-key “NombreUsuario”</span></pre>
<h4 align="justify" style="text-align: justify;">3.5 Cifrado asimétrico de archivos</h4>
<p>El objetivo es realizar el cifrado asimétrico con clave pública, para que 2 usuarios, puedan pasarse archivos. Los puntos a seguir son los siguientes:</p>
<p><strong>1.</strong> <strong>Exportar la clave pública del user1 para que el user2 la importe.</strong> Para comprobar la lista de claves públicas del user1, en primer lugar hay que iniciar sesión con user1 y luego, ejecutar el siguiente comando:</p>
<pre><span style="font-size: 12pt;"><b>user1@ubuntu-server2004:~$</b>gpg --list-keys</span></pre>
<p><img src="cifrado-asim-gpg-19.png" alt="" width="476" height="132" style="display: block; margin-left: auto; margin-right: auto;" />Se observa que se tiene una clave pública que caduca el 14 de Agosto de 2023.<br />A continuación hay que exportarla para distribuirla a otros usuarios con los que se desea compartir ficheros, el comando es el siguiente:</p>
<pre><span style="font-size: 12pt;"><b>user1@ubuntu-server2004:~$</b>gpg --export -a -o user1_public-key.txt</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-20.png" alt="" width="602" height="144" /></p>
<p style="text-align: justify;"></p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-21.png" alt="" width="354" height="66" /></p>
<p style="text-align: justify;">Una vez se tiene la clave pública, hay que pasársela al usuario <strong>user2</strong> para que la importe en su sistema, para ello, inciamos sesión en el equipo con user 2.</p>
<pre><span style="font-size: 12pt;"><b>user1@ubuntu-server2004:~$</b>login user2</span></pre>
<p style="text-align: justify;">Listamos el directorio compartido donde se ha exportado la clave para comprobar que está <span style="font-size: 12pt;">user1_public-key.txt</span>.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-21.png" alt="" width="354" height="66" /></p>
<p style="text-align: justify;">A continuación, comprobamos si user2 tiene claves:</p>
<pre><span style="font-size: 12pt;"><b>user2@ubuntu-server2004:~$</b>gpg -k</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-22.png" alt="" width="636" height="86" /></p>
<p style="text-align: justify;">Como se puede observar en la imagen superior (salida del comando), el usuario user2 no tiene creada ninguna clave. Vamos a importar la clave pública del user1 mediante el siguiente comando:</p>
<pre><span style="font-size: 12pt;"><b>user2@ubuntu-server2004:~$</b>gpg --import user1_public-key.txt</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-23.png" alt="" width="686" height="111" /></p>
<p style="text-align: justify;">Si listamos ahora las claves del user2, podemos observar que se ha importado la clave pública de user1.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-24.png" alt="" width="443" height="156" /></p>
<p>El siguiente paso es que <strong>user2</strong> cifre un fichero usando la clave pública de user1, para ello, creamos el fichero<strong> secret_for_user1.txt.</strong></p>
<p style="text-align: center;"><strong><img src="cifrado-asim-gpg-25.png" alt="" width="542" height="141" /></strong></p>
<p>A continuación, se cifra el fichero mediante el siguiente comando:</p>
<pre><span style="font-size: 12pt;"><b>user2@ubuntu-server2004:~$</b>gpg -e secret_for_user1.txt </span></pre>
<p>Le pegamos el ID de la clave pública del user1 (gpg -k para verla). Pulsamos Intro.</p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-26.png" alt="" width="763" height="250" /></p>
<p align="justify"><span style="font-size: medium;">Pulsamos intro para salir.</span></p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-27.png" alt="" width="724" height="305" /></p>
<p style="text-align: center;"><img src="cifrado-asim-gpg-28.png" alt="" width="572" height="136" /></p>
<p style="text-align: justify;">A continuación, borramos el fichero legible secret_for_user1.txt. Aunque esta carpeta esté visible para muchos usuarios, solo el usuario que tena la clave privada (user1) podrá descifrar el archivo secret_for_user1.txt.gpg.</p>
<p style="text-align: justify;">Iniciamos sesión con el user1 y pasamos a descifrar el fichero secret_for_user1.txt.gpg mediante el siguiente comando:</p>
<pre><span style="font-size: 12pt;"><b>user1@ubuntu-server2004:~$</b>gpg -d secret_for_user1.txt.gpg</span></pre>
<p style="text-align: center;"><img src="cifrado-asim-gpg-29.png" alt="" width="552" height="28" /></p>
<p>Nos solicita la contraseña de la clave privada del user1, la introducimos y pulsamos 'OK'.<img src="cifrado-asim-gpg-30.png" alt="" width="631" height="213" style="display: block; margin-left: auto; margin-right: auto;" /></p>
<p style="text-align: justify;">Nos descifra el fichero y nos muestra por pantalla su contenido. </p>
<p><img src="cifrado-asim-gpg-31.png" alt="" width="665" height="78" style="display: block; margin-left: auto; margin-right: auto;" /></p>
<p style="text-align: justify;">Para llevarlo a un fichero, hay que ejecutar el siguiente comando:</p>
<pre><span style="font-size: 12pt;"><b>user1@ubuntu-server2004:~$</b>gpg -d secret_for_user1.txt.gpg&gt; secret_for_user1.txt</span></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="6142_criptografa_de_clave_pblica.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="prctica_2cifrado_asimtrico.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
</div>
<script type="text/javascript" src="_style_js.js"></script></body></html>